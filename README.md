# CrudoDb

typescript written offline first indexeddb wrapper.

is able to sync with backend services by passing optional service implementation.

## crudodb

store list of `Database<T>` instances and manage them.

`schemaKey` is an identifier to the instance of `Database<T>` you want to access.

for example:

```typescript
declare wrapper: CrudoDb;
const key = await wrapper.registerDatabase({
    schema: mySchema
});
// key will generated by CrudoDb
const item: T = {key: 'value', id: '1'};
wrapper.create(key, item);
// will call create of the Database<T> instance
```

## database

manage all CRUD operations against store and optional api.

store item in indexeddb and on success try to call the api#create.

if no api defined, the item only lives in the indexeddb.

if api defined, the created item will send to api.

on successful creation, the local item will update without creation flag.

### flags

there are 3 flags to mark an item in indexeddb for processing.

+ C
+ U
+ D

## implementation status

- [X] Database
    - [X] Create
    - [X] Delete
    - [X] Get
    - [X] GetAll
    - [X] Update
    - [X] Sync
- [X] CrudoDb
    - [X] register new schema
    - [X] register existing schema
    - [X] register existing schema with update
    - [X] delegate requests to databases
    - [X] handle schemaKeys
